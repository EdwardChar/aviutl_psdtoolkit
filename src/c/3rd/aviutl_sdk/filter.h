//----------------------------------------------------------------------------------
//	?t?B???^?v???O?C?? ?w?b?_?[?t?@?C?? for AviUtl version 0.99k ??~
//	By ?j?d?m????
//----------------------------------------------------------------------------------

//	YC?\????
typedef	struct {
	short	y;					//	??f(?P?x    )?f?[?^ (     0 ?` 4096 )
	short	cb;					//	??f(?F??(??))?f?[?^ ( -2048 ?` 2048 )
	short	cr;					//	??f(?F??(??))?f?[?^ ( -2048 ?` 2048 )
								//	??f?f?[?^????O??o????Á∑?????????
								//	???????????????????????????
} PIXEL_YC;

//	PIXEL?\????
typedef	struct {
	unsigned char	b,g,r;		//	??f(RGB)?f?[?^ (0?`255)
} PIXEL;

//	?t?B???^PROC?p?\????
typedef struct {
	int			flag;			//	?t?B???^??t???O
								//	FILTER_PROC_INFO_FLAG_INVERT_FIELD_ORDER	: ?t?B?[???h?I?[?_?[??W????t????? ( ?W????{?g??->?g?b?v?????????? )
								//	FILTER_PROC_INFO_FLAG_INVERT_INTERLACE		: ???????@??]???? ( ?C???^?[???[?X?????t?B???^??? )
	PIXEL_YC	*ycp_edit;		//	???f?[?^???|?C???^ ( ycp_edit??ycp_temp??????????? )
	PIXEL_YC	*ycp_temp;		//	?e???|?????????|?C???^
	int			w,h;			//	????????T?C?Y ( ???T?C?Y???X?o????? )
	int			max_w,max_h;	//	??????T?C?Y
	int			frame;			//	?????t???[?????( ?????0???? )
	int			frame_n;		//	???t???[????
	int			org_w,org_h;	//	???????T?C?Y
	short		*audiop;		//	?I?[?f?B?I?f?[?^???|?C???^ ( ?I?[?f?B?I?t?B???^?????? )
								//	?I?[?f?B?I?`????PCM16bit??? ( 1?T???v???? mono = 2byte , stereo = 4byte )
	int			audio_n;		//	?I?[?f?B?I?T???v???????
	int			audio_ch;		//	?I?[?f?B?I?`?????l????
	PIXEL		*pixelp;		//	?????g?p???????????
	void		*editp;			//	?G?f?B?b?g?n???h??
	int			yc_size;		//	???????f??o?C?g?T?C?Y
	int			line_size;		//	?????????o?C?g?T?C?Y
	int			reserve[8];		//	?g???p??\??????
} FILTER_PROC_INFO;
#define	FILTER_PROC_INFO_FLAG_INVERT_FIELD_ORDER	0x00010000
#define	FILTER_PROC_INFO_FLAG_INVERT_INTERLACE		0x00020000
//	???C???^?[???[?X?????t?B???^????ycp_edit????????f?[?^??????????????B
//	???C???^?[???[?X?????t?B???^????ycp_edit,ycp_temp,w,h???X????????B

//	?t???[???X?e?[?^?X?\????
typedef struct {
	int		video;			//	?????f???f?[?^???
	int		audio;			//	?????????f?[?^???
	int		inter;			//	?t???[????C???^?[???[?X
							//	FRAME_STATUS_INTER_NORMAL	: ?W??
							//	FRAME_STATUS_INTER_REVERSE	: ???]
							//	FRAME_STATUS_INTER_ODD		: ??
							//	FRAME_STATUS_INTER_EVEN		: ????
							//	FRAME_STATUS_INTER_MIX		: ??d??
							//	FRAME_STATUS_INTER_AUTO		: ????
	int		index24fps;		//	?????g?p???????????
	int		config;			//	?t???[????v???t?@?C?????????
	int		vcm;			//	?t???[??????k??????
	int		edit_flag;		//	??W?t???O
							//	EDIT_FRAME_EDIT_FLAG_KEYFRAME	: ?L?[?t???[??
							//	EDIT_FRAME_EDIT_FLAG_MARKFRAME	: ?}?[?N?t???[??
							//	EDIT_FRAME_EDIT_FLAG_DELFRAME	: ?D???????t???[??
							//	EDIT_FRAME_EDIT_FLAG_NULLFRAME	: ?R?s?[?t???[??
	int		reserve[9];		//	?g???p??\??????
} FRAME_STATUS;
#define	FRAME_STATUS_INTER_NORMAL		0
#define	FRAME_STATUS_INTER_REVERSE		1
#define	FRAME_STATUS_INTER_ODD			2
#define	FRAME_STATUS_INTER_EVEN			3
#define	FRAME_STATUS_INTER_MIX			4
#define	FRAME_STATUS_INTER_AUTO			5
#define	EDIT_FRAME_EDIT_FLAG_KEYFRAME		1
#define	EDIT_FRAME_EDIT_FLAG_MARKFRAME		2
#define	EDIT_FRAME_EDIT_FLAG_DELFRAME		4
#define	EDIT_FRAME_EDIT_FLAG_NULLFRAME		8

//	?t?@?C???C???t?H???[?V?????\????
typedef struct {
	int		flag;					//	?t?@?C????t???O
									//	FILE_INFO_FLAG_VIDEO	: ?f???????????
									//	FILE_INFO_FLAG_AUDIO	: ?????????????
	LPSTR	name;					//	?t?@?C???? ( avi_file_open()???NULL?????? )
	int		w,h;					//	????T?C?Y
	int		video_rate,video_scale;	//	?t???[?????[?g
	int		audio_rate;				//	?????T???v?????O???[?g
	int		audio_ch;				//	?????`?????l????
	int		frame_n;				//	???t???[????
	DWORD	video_decode_format;	//	?r?f?I?W?J?`??
	int		video_decode_bit;		//	?r?f?I?W?J?`????r?b?g??
	int		audio_n;				//	????????T???v???? ( avi_file_open()???????????? )
	int		reserve[4];				//	?g???p??\??????
} FILE_INFO;
#define FILE_INFO_FLAG_VIDEO	1
#define FILE_INFO_FLAG_AUDIO	2

//	?V?X?e???C???t?H???[?V?????\????
typedef struct {
	int		flag;					//	?V?X?e???t???O
									//	SYS_INFO_FLAG_EDIT		: ??W??
									//	SYS_INFO_FLAG_VFAPI		: VFAPI????
									//	SYS_INFO_FLAG_USE_SSE	: SSE?g?p
									//	SYS_INFO_FLAG_USE_SSE2	: SSE2?g?p
	LPSTR	info;					//	?o?[?W???????
	int		filter_n;				//	?o?^??????t?B???^???
	int		min_w,min_h;			//	??W?o?????????T?C?Y
	int		max_w,max_h;			//	??W?o????????T?C?Y
	int		max_frame;				//	??W?o??????t???[????
	LPSTR	edit_name;				//	??W?t?@?C???? (?t?@?C????????????????????????????????????)
	LPSTR	project_name;			//	?v???W?F?N?g?t?@?C???? (?t?@?C????????????????????????????????????)
	LPSTR	output_name;			//	?o??t?@?C???? (?t?@?C????????????????????????????????????)
	int		vram_w,vram_h;			//	??W?p??????T?C?Y
	int		vram_yc_size;			//	??W?p???????f??o?C?g??
	int		vram_line_size;			//	??W?p?????????o?C?g??
	HFONT	hfont;					//	?t?B???^???E?B???h?E??g?p???????t?H???g??n???h??
	int		build;					//	?r???h??? (?V?????o?[?W?????????????l??????)
	int		reserve[2];				//	?g???p??\??????
} SYS_INFO;
#define SYS_INFO_FLAG_EDIT		1
#define SYS_INFO_FLAG_VFAPI		2
#define SYS_INFO_FLAG_USE_SSE	4
#define SYS_INFO_FLAG_USE_SSE2	8

//	?}???`?X???b?h????p???`
typedef void (*MULTI_THREAD_FUNC)( int thread_id,int thread_num,void *param1,void *param2 );
								//	thread_id	: ?X???b?h??? ( 0 ?` thread_num-1 )
								//	thread_num	: ?X???b?h?? ( 1 ?` )
								//	param1		: ??p?p?????[?^
								//	param2		: ??p?p?????[?^

//	AVI????t?@?C???n???h??
typedef void*	AVI_FILE_HANDLE;

//	?O??????\????
typedef struct {
	void		(*get_ycp_ofs)( void *editp,int n,int ofs );
								//	???o??????get_ycp_source_cache()??????g?p?????????????????
								//	?w?????t???[????AVI?t?@?C??????I?t?Z?b?g?????????
								//	?t???[??????f?[?^??|?C???^???èÔ?????
								//	?f?[?^??t?B???^?O???????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	n	 	: ?t???[?????
								//	ofs	 	: ?t???[???????I?t?Z?b?g
								//  ???l	: ???f?[?^???|?C???^ (NULL????s)
								//			  ???f?[?^?|?C???^????e?????O????????g???????C??????????????L??
	void		*(*get_ycp)( void *editp,int n );
								//	???o??????get_ycp_source_cache()??????g?p?????????????????
								//	?w?????t???[??????f?[?^??|?C???^???èÔ?????
								//	?f?[?^??t?B???^?O???????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	n	 	: ?t???[?????
								//  ???l	: ???f?[?^???|?C???^ (NULL????s)
								//			  ???f?[?^?|?C???^????e?????O????????g???????C??????????????L??
	void		*(*get_pixelp)( void *editp,int n );
								//	?w?????t???[????DIB?`??(RGB24bit)????f?[?^??|?C???^???èÔ?????
								//	?f?[?^??t?B???^?O???????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	n		: ?t???[?????
								//  ???l	: DIB?`???f?[?^???|?C???^ (NULL????s)
								//			  ???f?[?^?|?C???^????e?????O????????g???????C??????????????L??
	int			(*get_audio)( void *editp,int n,void *buf );
								//	?w?????t???[????I?[?f?B?I?f?[?^?????????
								//	?f?[?^??t?B???^?O???????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	n		: ?t???[?????
								//	buf 	: ?i?[????o?b?t?@ (NULL???T???v??????èÔ???)
								//  ???l	: ??????T???v????
	BOOL		(*is_editing)( void *editp );
								//	?????W??????????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  ???l	: TRUE????W??
	BOOL		(*is_saving)( void *editp );
								//	????????????????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  ???l	: TRUE???????
	int			(*get_frame)( void *editp );
								//	?????\???t???[?????èÔ?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  ???l	: ?????t???[?????
	int			(*get_frame_n)( void *editp );
								//	???t???[???????èÔ?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  ???l	: ???????t???[????
	BOOL		(*get_frame_size)( void *editp,int *w,int *h );
								//	?t?B???^?O??t???[????T?C?Y???èÔ?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	w,h 	: ???T?C?Y??i?[?|?C???^
								//  ???l	: TRUE?????
	int			(*set_frame)( void *editp,int n );
								//	?????\???t???[?????X?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  n		: ?t???[?????
								//  ???l	: ??????t???[?????
	int			(*set_frame_n)( void *editp,int n );
								//	???t???[???????X?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  n		: ?t???[????
								//  ???l	: ????????t???[????
	BOOL		(*copy_frame)( void *editp,int d,int s );
								//	?t???[?????t???[????R?s?[?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	d	 	: ?R?s?[??t???[?????
								//	s	 	: ?R?s?[???t???[?????
								//  ???l	: TRUE?????
	BOOL		(*copy_video)( void *editp,int d,int s );
								//	?t???[????f?????????t???[????R?s?[?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	d	 	: ?R?s?[??t???[?????
								//	s	 	: ?R?s?[???t???[?????
								//  ???l	: TRUE?????
	BOOL		(*copy_audio)( void *editp,int d,int s );
								//	?t???[??????????????t???[????R?s?[?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	d	 	: ?R?s?[??t???[?????
								//	s	 	: ?R?s?[???t???[?????
								//  ???l	: TRUE?????
	BOOL		(*copy_clip)( HWND hwnd,void *pixelp,int w,int h );
								//	?N???b?v?{?[?h??DIB?`??(RGB24bit)??????R?s?[?????
								//	hwnd 	: ?E?B???h?E?n???h??
								//	pixelp	: DIB?`???f?[?^???|?C???^
								//	w,h 	: ???T?C?Y
								//  ???l	: TRUE?????
	BOOL		(*paste_clip)( HWND hwnd,void *editp,int n );
								//	?N???b?v?{?[?h?????????????
								//	hwnd 	: ?E?B???h?E?n???h??
								//	editp 	: ?G?f?B?b?g?n???h??
								//  n		: ?t???[?????
								//  ???l	: TRUE?????
	BOOL		(*get_frame_status)( void *editp,int n,FRAME_STATUS *fsp );
								//	?t???[????X?e?[?^?X???èÔ?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  n		: ?t???[?????
								//  fps		: ?t???[???X?e?[?^?X???|?C???^
								//  ???l	: TRUE?????
	BOOL		(*set_frame_status)( void *editp,int n,FRAME_STATUS *fsp );
								//	?t???[????X?e?[?^?X???X?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  n		: ?t???[?????
								//  fps		: ?t???[???X?e?[?^?X???|?C???^
								//  ???l	: TRUE?????
	BOOL		(*is_saveframe)( void *editp,int n );
								//	????????????t???[??????????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  n		: ?t???[?????
								//  ???l	: TRUE???????????
	BOOL		(*is_keyframe)( void *editp,int n );
								//	?L?[?t???[???????????????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  n		: ?t???[?????
								//  ???l	: TRUE???L?[?t???[??
	BOOL		(*is_recompress)( void *editp,int n );
								//	????k???K?v????????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  n		: ?t???[?????
								//  ???l	: TRUE??????k???K?v
	BOOL		(*filter_window_update)( void *fp );
								//	???E?B???h?E??g???b?N?o?[??`?F?b?N?{?b?N?X????`?úÆ???
								//	fp	 	: ?t?B???^?\?????|?C???^
								//  ???l	: TRUE?????
	BOOL		(*is_filter_window_disp)( void *fp );
								//	???E?B???h?E???\????????????????
								//	fp	 	: ?t?B???^?\?????|?C???^
								//  ???l	: TRUE???\??????????
	BOOL		(*get_file_info)( void *editp,FILE_INFO *fip );
								//	??W?t?@?C????????èÔ?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  fip		: ?t?@?C???C???t?H???[?V?????\??????|?C???^
								//  ???l	: TRUE?????
	LPSTR		(*get_config_name)( void *editp,int n );
								//	?????v???t?@?C??????O???èÔ?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  n		: ?v???t?@?C?????????
								//  ???l	: ?v???t?@?C??????O???|?C???^ (NULL????s)
	BOOL		(*is_filter_active)( void *fp );
								//	?t?B???^???L?????????????????
								//	fp	 	: ?t?B???^?\?????|?C???^
								//  ???l	: TRUE???t?B???^?L??
	BOOL		(*get_pixel_filtered)( void *editp,int n,void *pixelp,int *w,int *h );
								//	?w?????t???[????DIB?`??(RGB24bit)????f?[?^?????????
								//	?f?[?^??t?B???^????????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	n		: ?t???[?????
								//  pixelp	: DIB?`???f?[?^???i?[????|?C???^ (NULL?????T?C?Y???????????)
								//	w,h		: ????T?C?Y (NULL???DIB?`???f?[?^???????????)
								//  ???l	: TRUE?????
	int			(*get_audio_filtered)( void *editp,int n,void *buf );
								//	?w?????t???[????I?[?f?B?I?f?[?^?????????
								//	?f?[?^??t?B???^????????
								//	editp* 	: ?G?f?B?b?g?n???h??
								//	n		: ?t???[?????
								//	buf 	: ?i?[????o?b?t?@ (NULL???T???v??????èÔ???)
								//  ???l	: ??????T???v????
	BOOL		(*get_select_frame)( void *editp,int *s,int *e );
								//	?I???J?n?I???t???[?????èÔ?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	s		: ?I???J?n?t???[??
								//	e		: ?I???I???t???[??
								//  ???l	: TRUE?????
	BOOL		(*set_select_frame)( void *editp,int s,int e );
								//	?I???J?n?I???t???[?????????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	s		: ?I???J?n?t???[??
								//	e		: ?I???I???t???[??
								//  ???l	: TRUE?????
	BOOL		(*rgb2yc)( PIXEL_YC *ycp,PIXEL *pixelp,int w );
								//	PIXEL????PIXEL_YC?????????
								//	ycp		: PIXEL_YC?\??????|?C???^
								//	pixelp 	: PIXEL?\??????|?C???^
								//	w		: ?\??????
								//  ???l	: TRUE?????
	BOOL		(*yc2rgb)( PIXEL *pixelp,PIXEL_YC *ycp,int w );
								//	PIXEL_YC????PIXEL?????????
								//	pixelp 	: PIXEL?\??????|?C???^
								//	ycp		: PIXEL_YC?\??????|?C???^
								//	w		: ?\??????
								//  ???l	: TRUE?????
	BOOL		(*dlg_get_load_name)( LPSTR name,LPSTR filter,LPSTR def );
								//	?t?@?C???_?C?A???O???g?????????t?@?C???????èÔ?????
								//	name	: ?t?@?C???????i?[????|?C???^
								//	filter	: ?t?@?C???t?B???^
								//  def		: ?f?t?H???g??t?@?C????
								//  ???l	: TRUE????? FALSE???L?????Z??
	BOOL		(*dlg_get_save_name)( LPSTR name,LPSTR filter,LPSTR def );
								//	?t?@?C???_?C?A???O???g???????????t?@?C???????èÔ?????
								//	name	: ?t?@?C???????i?[????|?C???^
								//	filter	: ?t?@?C???t?B???^
								//  def		: ?f?t?H???g??t?@?C????
								//  ???l	: TRUE????? FALSE???L?????Z??
	int			(*ini_load_int)( void *fp,LPSTR key,int n );
								//	INI?t?@?C???????l???????
								//	fp	 	: ?t?B???^?\?????|?C???^
								//	key		: ?A?N?Z?X?p??L?[????O
								//  n		: ?f?t?H???g????l
								//  ???l	: ????????l
	int			(*ini_save_int)( void *fp,LPSTR key,int n );
								//	INI?t?@?C??????l??????????
								//	fp	 	: ?t?B???^?\?????|?C???^
								//	key		: ?A?N?Z?X?p??L?[????O
								//  n		: ??????????l
								//  ???l	: ??????????l
	BOOL		(*ini_load_str)( void *fp,LPSTR key,LPSTR str,LPSTR def );
								//	INI?t?@?C?????·c??????????
								//	fp	 	: ?t?B???^?\?????|?C???^
								//	key		: ?A?N?Z?X?p??L?[????O
								//  str		: ????????????o?b?t?@
								//  def		: ?f?t?H???g???????
								//  ???l	: TRUE?????
	BOOL		(*ini_save_str)( void *fp,LPSTR key,LPSTR str );
								//	INI?t?@?C??????????????????
								//	fp	 	: ?t?B???^?\?????|?C???^
								//	key		: ?A?N?Z?X?p??L?[????O
								//  n		: ?????????????
								//  ???l	: TRUE?????
	BOOL		(*get_source_file_info)( void *editp,FILE_INFO *fip,int source_file_id );
								//	?w?????t?@?C??ID??t?@?C????????èÔ?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  fip		: ?t?@?C???C???t?H???[?V?????\??????|?C???^
								//	souce_file_id
								//			: ?t?@?C??ID
								//  ???l	: TRUE?????
	BOOL		(*get_source_video_number)( void *editp,int n,int *source_file_id,int *source_video_number );
								//	?w?????t???[????\?[?X??t?@?C??ID??t???[????????èÔ?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	n		: ?t???[?????
								//	souce_file_id
								//			: ?t?@?C??ID???i?[????|?C???^
								//	souce_video_number
								//			: ?t???[????????i?[????|?C???^
								//  ???l	: TRUE?????
	BOOL		(*get_sys_info)( void *editp,SYS_INFO *sip );
								//	?V?X?e????????èÔ?????
								//	editp 	: ?G?f?B?b?g?n???h?? (NULL???sip???W????t???O???????t?@?C????????????????)
								//  sip		: ?V?X?e???C???t?H???[?V?????\??????|?C???^
								//  ???l	: TRUE?????
	void 		*(*get_filterp)( int filter_id );
								//	?w???t?B???^ID??t?B???^?\??????|?C???^???èÔ?????
								//	filter_id
								//		 	: ?t?B???^ID (0?`?o?^??????t?B???^???-1????l)
								//  ???l	: ?t?B???^?\??????|?C???^ (NULL????s)
	void		*(*get_ycp_filtering)( void *fp,void *editp,int n,void *reserve );
								//	???o??????get_ycp_filtering_cache_ex()??????g?p?????????????????
								//	?w?????t???[??????f?[?^??|?C???^???èÔ?????
								//	?f?[?^???????t?B???^????O???t?B???^??????????
								//	fp	 	: ?t?B???^?\?????|?C???^
								//	editp 	: ?G?f?B?b?g?n???h??
								//	n	 	: ?t???[?????
								//	reserve	: NULL???w???????????
								//  ???l	: ???f?[?^???|?C???^ (NULL????s)
								//			  ???f?[?^?|?C???^????e?????O????????g???????C??????????????L??
	int			(*get_audio_filtering)( void *fp,void *editp,int n,void *buf );
								//	?w?????t???[????I?[?f?B?I?f?[?^?????????
								//	?f?[?^???????t?B???^????O???t?B???^??????????
								//	fp	 	: ?t?B???^?\?????|?C???^
								//	editp 	: ?G?f?B?b?g?n???h??
								//	n		: ?t???[?????
								//	buf 	: ?i?[????o?b?t?@ (NULL???T???v??????èÔ???)
								//  ???l	: ??????T???v????
	BOOL		(*set_ycp_filtering_cache_size)( void *fp,int w,int h,int d,int flag );
								//	get_ycp_filtering_cache_ex()??L???b?V????????????
								//	???l?????????????L???b?V????????m??????
								//	?L???b?V??????t?B???^???A?N?e?B?u??????m???????
								//	fp	 	: ?t?B???^?\?????|?C???^
								//	w	 	: ?L???b?V???????
								//	h	 	: ?L???b?V?????????
								//	d	 	: ?L???b?V??????t???[????
								//	flag 	: NULL???w???????????
								//  ???l	: TRUE?????
	void		*(*get_ycp_filtering_cache)( void *fp,void *editp,int n );
								//	???o??????get_ycp_filtering_cache_ex()??????g?p?????????????????
								//	?w?????t???[??????f?[?^??L???b?V???|?C???^???èÔ?????
								//	set_ycp_filtering_cache_size()??????????????L???b?V????????
								//	?f?[?^???????t?B???^????O???t?B???^??????????
								//	fp	 	: ?t?B???^?\?????|?C???^
								//	editp 	: ?G?f?B?b?g?n???h??
								//	n	 	: ?t???[?????
								//  ???l	: ???f?[?^???L???b?V???|?C???^ (NULL????s)
								//			  ???f?[?^?|?C???^????e??L???b?V??????j?????????L??
	void		*(*get_ycp_source_cache)( void *editp,int n,int ofs );
								//	?w?????t???[??????f?[?^??|?C???^???èÔ?????
								//	?f?[?^??t?B???^?O???????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	n	 	: ?t???[?????
								//	ofs	 	: ????AVI????t???[????I?t?Z?b?g
								//  ???l	: ???f?[?^???|?C???^ (NULL????s)
								//			  ???f?[?^?|?C???^????e??L???b?V??????j?????????L??
	void		*(*get_disp_pixelp)( void *editp,DWORD format );
								//	?\??????????t???[??????f?[?^??|?C???^???èÔ?????
								//	?f?[?^??t?B???^????????
								//	?\???t?B???^???g?p??\????B
								//	editp 	: ?G?f?B?b?g?n???h??
								//	format	: ???t?H?[?}?b?g( NULL = RGB24bit / 'Y''U''Y''2' = YUY2 )
								//  ???l	: ???f?[?^???|?C???^ (NULL????s)
								//			  ???f?[?^?|?C???^????e?????O????????g???????C??????????????L??
	BOOL		(*get_pixel_source)( void *editp,int n,void *pixelp,DWORD format );
								//	?w?????t???[??????f?[?^?????????
								//	?f?[?^??t?B???^?O???????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	n	 	: ?t???[?????
								//  pixelp	: DIB?`???f?[?^???i?[????|?C???^
								//	format	: ???t?H?[?}?b?g( NULL = RGB24bit / 'Y''U''Y''2' = YUY2 )
								//  ???l	: TRUE?????
	BOOL		(*get_pixel_filtered_ex)( void *editp,int n,void *pixelp,int *w,int *h,DWORD format );
								//	?w?????t???[??????f?[?^?????????
								//	?f?[?^??t?B???^????????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	n	 	: ?t???[?????
								//  pixelp	: DIB?`???f?[?^???i?[????|?C???^ (NULL?????T?C?Y???????????)
								//	w,h		: ????T?C?Y (NULL???DIB?`???f?[?^???????????)
								//	format	: ???t?H?[?}?b?g( NULL = RGB24bit / 'Y''U''Y''2' = YUY2 )
								//  ???l	: TRUE?????
	PIXEL_YC	*(*get_ycp_filtering_cache_ex)( void *fp,void *editp,int n,int *w,int *h );
								//	?w?????t???[??????f?[?^??L???b?V???|?C???^???èÔ?????
								//	set_ycp_filtering_cache_size()??????????????L???b?V????????
								//	?f?[?^???????t?B???^????O???t?B???^??????????
								//	fp	 	: ?t?B???^?\?????|?C???^
								//	editp 	: ?G?f?B?b?g?n???h??
								//	n	 	: ?t???[?????
								//	w,h		: ?èÔ????????T?C?Y (NULL??·p????????)
								//  ???l	: ???f?[?^???L???b?V???|?C???^ (NULL????s)
								//			  ???f?[?^?|?C???^????e??L???b?V??????j?????????L??
	BOOL		(*exec_multi_thread_func)( MULTI_THREAD_FUNC func,void *param1,void *param2 );
								//	?w??????????V?X?e??????l????????X???b?h?????Ñëo?????
								//	??Ñëo?????????????Win32API??O?????(rgb2yc,yc2rgb?????)???g?p??????????????
								//	func	: ?}???`?X???b?h???Ñëo?????
								//	param1 	: ??Ñëo???????n????p?p?????[?^
								//	param2 	: ??Ñëo???????n????p?p?????[?^
								//  ???l	: TRUE?????
	PIXEL_YC	*(*create_yc)( void );
								//	???t???[?????f?[?^???????????
								//	ycp_edit????l??O???????g?p????????
								//	FILTER_PROC_INFO??ycp_edit,ycp_temp????????Á∑???o???????
								//  ???l	: ???????t???[?????f?[?^???|?C???^ (NULL????s)
	void		(*delete_yc)( PIXEL_YC *ycp );
								//	create_yc??????????????????
	BOOL 		(*load_image)( PIXEL_YC *ycp,LPSTR file,int *w,int *h,int flag );
								//	?t???[?????f?[?^??BMP?t?@?C????????????????
								//	ycp     : ?????????t???[???????|?C???^ (NULL???`?????????T?C?Y???????)
								//	file	: ??????BMP?t?@?C????
								//	w,h		: ?????????T?C?Y (NULL???w???????)
								//	flag 	: NULL???w???????????
								//  ???l	: TRUE?????
	void		(*resize_yc)( PIXEL_YC *ycp,int w,int h,PIXEL_YC *ycp_src,int sx,int sy,int sw,int sh );
								//	?t???[?????f?[?^?????T?C?Y?????
								//	??????C???????????T?C?Y???Á∑????o?????
								//	ycp     : ???T?C?Y???t???[???????i?[????|?C???^
								//	w,h     : ???T?C?Y???x
								//	ycp_src	: ??????t???[???????|?C???^(NULL???ycp?????)
								//	sx,sy	: ????????T?C?Y????????????W
								//	sw,sh	: ????????T?C?Y??????T?C?Y
	void 		(*copy_yc)( PIXEL_YC *ycp,int x,int y,PIXEL_YC *ycp_src,int sx,int sy,int sw,int sh,int tr );
								//	?t???[?????f?[?^??C???????R?s?[?????
								//	?`?????????T?C?Y????????????N???b?s???O???????
								//	?R?s?[????R?s?[??????d???????????????????
								//	ycp     : ?R?s?[???t???[???????|?C???^
								//	x,y		: ?R?s?[?????????W
								//	ycp_src	: ?R?s?[????t???[???????|?C???^
								//	sx,sy	: ?R?s?[??????????W
								//	sw,sh	: ?R?s?[????T?C?Y
								//	tr      : ?R?s?[????????x (0?`4096)
	void 		(*draw_text)( PIXEL_YC *ycp,int x,int y,LPSTR text,int r,int g,int b,int tr,HFONT hfont,int *w,int *h );
								//	?t???[?????f?[?^??e?L?X?g??`?úÆ???
								//	?`?????????T?C?Y????????????N???b?s???O???????
								//	ycp     : ?`????t???[?????f?[?^???|?C???^ (NULL???`?????????T?C?Y???????)
								//	x,y		: ?`?????????W
								//	text	: ?`????e?L?X?g????e
								//	r,g,b	: ?`??F (0?`255)
								//	tr      : ?????x (0?`4096)
								//	hfont	: ?`???g?p????t?H???g (NULL???f?t?H???g??t?H???g)
								//	w,h		: ?`?úÆ???e?L?X?g????T?C?Y (NULL???w???????)
	AVI_FILE_HANDLE (*avi_file_open)( LPSTR file,FILE_INFO *fip,int flag );
								//	AVI?t?@?C?????I?[?v??????avi_file_read_video(),avi_file_read_audio()??
								//	?f?[?^?????????n???h?????èÔ??????B
								//	????W????t?@?C????t?H?[?}?b?g(fps??T???v?????O???[?g??)?????????????????????????????B
								//	file    : ??????AVI?t?@?C???? (????v???O?C??????????t?@?C?????w???????)
								//  fip		: ?t?@?C???C???t?H???[?V?????\??????|?C???^ (??????t?@?C???????????)
								//	flag 	: ??????t???O
								//	AVI_FILE_OPEN_FLAG_ONLY_YUY2		: YUY2 ??W?J???????????
								//	AVI_FILE_OPEN_FLAG_ONLY_RGB24		: RGB24??W?J???????????
								//	AVI_FILE_OPEN_FLAG_ONLY_RGB32		: RGB32??W?J???????????
								//	AVI_FILE_OPEN_FLAG_VIDEO_ONLY		: ?r?f?I???????????????
								//	AVI_FILE_OPEN_FLAG_AUDIO_ONLY		: ?I?[?f?B?I???????????????
								//  ???l	: AVI?t?@?C???n???h?? (NULL????s)
	void 		(*avi_file_close)( AVI_FILE_HANDLE afh );
								//	AVI?t?@?C?????N???[?Y?????
								//	afh		: AVI?t?@?C???n???h??
	BOOL 		(*avi_file_read_video)( AVI_FILE_HANDLE afh,PIXEL_YC *ycp,int n );
								//	?t???[?????f?[?^??AVI?t?@?C????????f?[?^?????????
								//	afh		: AVI?t?@?C???n???h??
								//	ycp     : ???f?[?^???????t???[???????|?C???^
								//	n		: ?t???[?????
								//  ???l	: TRUE?????
	int 		(*avi_file_read_audio)( AVI_FILE_HANDLE afh,void *buf,int n );
								//	AVI?t?@?C?????ì¡???f?[?^?????????
								//	afh		: AVI?t?@?C???n???h??
								//	buf     : ???????????o?b?t?@???|?C???^
								//	n		: ?t???[?????
								//  ???l	: ??????T???v????
	void 		*(*avi_file_get_video_pixelp)( AVI_FILE_HANDLE afh,int n );
								//	AVI?t?@?C???????????DIB?`??????f?[?^??|?C???^???èÔ?????
								//	?èÔ???????f?[?^??t?H?[?}?b?g??avi_file_open()??èÔ????
								//	FILE_INFO??r?f?I?W?J?`?????????B
								//	afh		: AVI?t?@?C???n???h??
								//	n		: ?t???[?????
								//  ???l	: DIB?`???f?[?^???|?C???^ (NULL????s)
								//			  ???f?[?^?|?C???^????e?????O????????g???????C??????????????L??
	LPSTR		(*get_avi_file_filter)( int type );
								//	avi_file_open()????????t?@?C????t?@?C???t?B???^???èÔ?????
								//	type	: ?t?@?C??????
								//	GET_AVI_FILE_FILTER_TYPE_VIDEO	: ?r?f?I??
								//	GET_AVI_FILE_FILTER_TYPE_AUDIO	: ?I?[?f?B?I
								//  ???l	: ?t?@?C???t?B???^???|?C???^
	int			(*avi_file_read_audio_sample)( AVI_FILE_HANDLE afh,int start,int length,void *buf );
								//	AVI?t?@?C?????ì¡???f?[?^?????????
								//	afh		: AVI?t?@?C???n???h??
								//	start   : ??????J?n?T???v?????
								//	length	: ??????T???v????
								//	buf		: ?f?[?^???????o?b?t?@???|?C???^
								//  ???l	: ??????T???v????
	int			(*avi_file_set_audio_sample_rate)( AVI_FILE_HANDLE afh,int audio_rate,int audio_ch );
								//	avi_file_read_audio_sample()????????????T???v?????O???[?g?????X?????
								//	afh		: AVI?t?@?C???n???h??
								//	audio_rate	: ?????T???v?????O???[?g
								//	audio_ch	: ?????`?????l????
								//  ???l	: ??X?????T???v?????O???[?g?????T???v????
	BYTE		*(*get_frame_status_table)( void *editp,int type );
								//	?t???[????X?e?[?^?X???i?[????????o?b?t?@???|?C???^???èÔ?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  type	: ?X?e?[?^?X????
								//	FARME_STATUS_TYPE_EDIT_FLAG	: ??W?t???O
								//	FARME_STATUS_TYPE_INTER		: ?C???^?[???[?X
								//  ???l	: ?o?b?t?@???|?C???^
								//			  ?o?b?t?@???|?C???^????e???W?t?@?C?????N???[?Y???????L??
	BOOL		(*set_undo)( void *editp );
								//	??????W????A???h?D?o?b?t?@???????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  ???l	: TRUE?????
	BOOL		(*add_menu_item)( void *fp,LPSTR name,HWND hwnd,int id,int def_key,int flag );
								//	???C???E?B???h?E?????j???[????????????
								//	???j???[???I??????????hwnd??w?????E?B???h?E??
								//	WM_FILTER_COMMAND????b?Z?[?W?????
								//	???K??func_init()??WM_FILTER_INIT?????Ñëo?????????????????B
								//	fp	 	: ?t?B???^?\?????|?C???^
								//	name 	: ???j???[????O
								//	hwnd 	: WM_FILTER_COMMAND???E?B???h?E?n???h??
								//	id	 	: WM_FILTER_COMMAND??WPARAM
								//	def_key	: ?W????V???[?g?J?b?g?L?[????z?L?[?R?[?h (NULL??·p??)
								//	flag	: ?t???O
								//	ADD_MENU_ITEM_FLAG_KEY_SHIFT	: ?W????V???[?g?J?b?g?L?[??SHIFT+?L?[?????
								//	ADD_MENU_ITEM_FLAG_KEY_CTRL		: ?W????V???[?g?J?b?g?L?[??CTRL+?L?[?????
								//	ADD_MENU_ITEM_FLAG_KEY_ALT		: ?W????V???[?g?J?b?g?L?[??ALT+?L?[?????
								//  ???l	: TRUE?????
	BOOL 		(*edit_open)( void *editp,LPSTR file,int flag );
								//	??W?t?@?C?????J?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	file 	: ?t?@?C????
								//	flag 	: ?t???O
								//	EDIT_OPEN_FLAG_ADD			: ???????????????
								//	EDIT_OPEN_FLAG_AUDIO		: ????????????????
								//	EDIT_OPEN_FLAG_PROJECT		: ?v???W?F?N?g?t?@?C?????J?????
								//	EDIT_OPEN_FLAG_DIALOG		: ??????_?C?A???O??\???????
								//  ???l	: TRUE?????
	BOOL 		(*edit_close)( void *editp );
								//	??W?t?@?C?????????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  ???l	: TRUE?????
	BOOL 		(*edit_output)( void *editp,LPSTR file,int flag,LPSTR type );
								//	??W?f?[?^??AVI?o??????
								//	WAV?o???v???O?C???o????o?????
								//	editp 	: ?G?f?B?b?g?n???h??
								//	file 	: ?o??t?@?C????
								//	flag	: ?t???O
								//	EDIT_OUTPUT_FLAG_NO_DIALOG	: ?o??_?C?A???O??\?????????
								//	EDIT_OUTPUT_FLAG_WAV		: WAV?o????????
								//	type	: ?o??v???O?C??????O (NULL???AVI/WAV?o??)
								//  ???l	: TRUE?????
	BOOL 		(*set_config)( void *editp,int n,LPSTR name );
								//	?v???t?@?C?????????
								//	editp 	: ?G?f?B?b?g?n???h??
								//  n		: ?v???t?@?C?????????
								//  name	: ?v???t?@?C??????O
								//  ???l	: TRUE?????
	int			reserve[7];
} EXFUNC;
#define	AVI_FILE_OPEN_FLAG_VIDEO_ONLY		16
#define	AVI_FILE_OPEN_FLAG_AUDIO_ONLY		32
#define	AVI_FILE_OPEN_FLAG_ONLY_YUY2		0x10000
#define	AVI_FILE_OPEN_FLAG_ONLY_RGB24		0x20000
#define	AVI_FILE_OPEN_FLAG_ONLY_RGB32		0x40000
#define	GET_AVI_FILE_FILTER_TYPE_VIDEO		0
#define	GET_AVI_FILE_FILTER_TYPE_AUDIO		1
#define FARME_STATUS_TYPE_EDIT_FLAG			0
#define FARME_STATUS_TYPE_INTER				1
#define ADD_MENU_ITEM_FLAG_KEY_SHIFT		1
#define ADD_MENU_ITEM_FLAG_KEY_CTRL			2
#define ADD_MENU_ITEM_FLAG_KEY_ALT			4
#define	EDIT_OPEN_FLAG_ADD					2
#define	EDIT_OPEN_FLAG_AUDIO				16
#define	EDIT_OPEN_FLAG_PROJECT				512
#define	EDIT_OPEN_FLAG_DIALOG				65536
#define	EDIT_OUTPUT_FLAG_NO_DIALOG			2
#define	EDIT_OUTPUT_FLAG_WAV				4

//	?t?B???^?\????
typedef struct {
	int		flag;				//	?t?B???^??t???O
								//	FILTER_FLAG_ALWAYS_ACTIVE		: ?t?B???^?????A?N?e?B?u??????
								//	FILTER_FLAG_CONFIG_POPUP		: ?????|?b?v?A?b?v???j???[??????
								//	FILTER_FLAG_CONFIG_CHECK		: ?????`?F?b?N?{?b?N?X???j???[??????
								//	FILTER_FLAG_CONFIG_RADIO		: ???????W?I?{?^?????j???[??????
								//	FILTER_FLAG_EX_DATA				: ?g???f?[?^?????o???????????
								//	FILTER_FLAG_PRIORITY_HIGHEST	: ?t?B???^??v???C?I???e?B?????????????
								//	FILTER_FLAG_PRIORITY_LOWEST		: ?t?B???^??v???C?I???e?B??????????????
								//	FILTER_FLAG_WINDOW_THICKFRAME	: ?T?C?Y??X??\??E?B???h?E???????
								//	FILTER_FLAG_WINDOW_SIZE			: ???E?B???h?E??T?C?Y???w??o???????????
								//	FILTER_FLAG_DISP_FILTER			: ?\???t?B???^??????
								//	FILTER_FLAG_REDRAW				: ??`???plugin??????????????????
								//	FILTER_FLAG_EX_INFORMATION		: ?t?B???^??g???????????????????
								//	FILTER_FLAG_INFORMATION			: FILTER_FLAG_EX_INFORMATION ???g??????????????
								//	FILTER_FLAG_NO_CONFIG			: ???E?B???h?E??\???????????????
								//	FILTER_FLAG_AUDIO_FILTER		: ?I?[?f?B?I?t?B???^??????
								//	FILTER_FLAG_RADIO_BUTTON		: ?`?F?b?N?{?b?N?X?????W?I?{?^????????
								//	FILTER_FLAG_WINDOW_HSCROLL		: ?????X?N???[???o?[??????E?B???h?E???????
								//	FILTER_FLAG_WINDOW_VSCROLL		: ?????X?N???[???o?[??????E?B???h?E???????
								//	FILTER_FLAG_INTERLACE_FILTER	: ?C???^?[???[?X?????t?B???^??????
								//	FILTER_FLAG_NO_INIT_DATA		: func_proc()?????????f?[?^?????????????????
								//	FILTER_FLAG_IMPORT				: ?C???|?[?g???j???[???????
								//	FILTER_FLAG_EXPORT				: ?G?N?X?|?[?g???j???[???????
								//	FILTER_FLAG_MAIN_MESSAGE		: func_WndProc()??WM_FILTER_MAIN_???????b?Z?[?W??????????
	int		x,y;				//	???E?C???h?E??T?C?Y (FILTER_FLAG_WINDOW_SIZE?????????????L??)
								//	???l?? FILTER_WINDOW_SIZE_CLIENT ??OR?????????N???C?A???g?????T?C?Y?w????????B
								//	???l?? FILTER_WINDOW_SIZE_ADD ??OR?????????W????T?C?Y???????????w????????B
	TCHAR	*name;				//	?t?B???^????O
	int		track_n;			//	?g???b?N?o?[???
	TCHAR	**track_name;		//	?g???b?N?o?[????O?S???|?C???^(?g???b?N?o?[????0???NULL???)
	int		*track_default;		//	?g???b?N?o?[??????l?S???|?C???^(?g???b?N?o?[????0???NULL???)
	int		*track_s,*track_e;	//	?g???b?N?o?[????l???????? (NULL???S??0?`256)
	int		check_n;			//	?`?F?b?N?{?b?N?X???
	TCHAR	**check_name;		//	?`?F?b?N?{?b?N?X????O?S???|?C???^(?`?F?b?N?{?b?N?X????0???NULL???)
	int		*check_default;		//	?`?F?b?N?{?b?N?X??????l?S???|?C???^(?`?F?b?N?{?b?N?X????0???NULL???)
								//	?????l???}?C?i?X?l?????{?^?????????B?{?^???????????????WM_COMMAND( WPARAM = MID_FILTER_BUTTON + n )??E?B???h?E???b?Z?[?W?????????
	BOOL	(*func_proc)( void *fp,FILTER_PROC_INFO *fpip );
								//	?t?B???^??????????|?C???^ (NULL??????????)
	BOOL	(*func_init)( void *fp );
								//	?J?n?????????????|?C???^ (NULL??????????)
	BOOL	(*func_exit)( void *fp );
								//	?I???????????????|?C???^ (NULL??????????)
	BOOL	(*func_update)( void *fp,int status );
								//	???????ñb??X??????????????????|?C???^ (NULL??????????)
								//	FILTER_UPDATE_STATUS_ALL		: ?S???????X????
								//	FILTER_UPDATE_STATUS_TRACK + n	: n????g???b?N?o?[????X????
								//	FILTER_UPDATE_STATUS_CHECK + n	: n????`?F?b?N?{?b?N?X????X????
	BOOL 	(*func_WndProc)( HWND hwnd,UINT message,WPARAM wparam,LPARAM lparam,void *editp,void *fp );
								//	???E?B???h?E??E?B???h?E???b?Z?[?W???????????????????|?C???^ (NULL??????????)
								//	VFAPI??????????????
								//	??????b?Z?[?W??O??????g?????b?Z?[?W?????????
								//	WM_FILTER_UPDATE		: ?e?t?B???^?????W???e????X???????????????
								//	WM_FILTER_FILE_OPEN		: ??W?t?@?C?????I?[?v?????????????????
								//	WM_FILTER_FILE_UPDATE	: ??W?t?@?C????X?V(??????????????)???????????????????
								//	WM_FILTER_FILE_CLOSE	: ??W?t?@?C?????N???[?Y??????O????????
								//	WM_FILTER_INIT			: ?J?n???????????
								//	WM_FILTER_EXIT			: ?I?????O????????
								//	WM_FILTER_SAVE_START	: ?Z?[?u???J?n??????O????????
								//	WM_FILTER_SAVE_END		: ?Z?[?u???I?????????????????
								//	WM_FILTER_IMPORT		: ?C???|?[?g???I?????????????????
								//	WM_FILTER_EXPORT		: ?G?N?X?|?[?g???I?????????????????
								//	WM_FILTER_CHANGE_ACTIVE	: ?t?B???^??L??/????????X???????????????
								//	WM_FILTER_CHANGE_WINDOW	: ?t?B???^?E?B???h?E??\??/??\??????X???????????????
								//	WM_FILTER_CHANGE_PARAM	: ??????t?B???^???ñb??X???????????????
								//	WM_FILTER_CHANGE_EDIT	: ??W??/???W??????X???????????????
								//	?????~????b?Z?[?W??FILTER_FLAG_MAIN_MESSAGE??äŒ?????????
								//	WM_FILTER_MAIN_MOUSE_DOWN	: ???C???E?B???h?E??}?E?X????{?^????????????????????
								//	WM_FILTER_MAIN_MOUSE_UP		: ???C???E?B???h?E??}?E?X???????????????????
								//	WM_FILTER_MAIN_MOUSE_MOVE	: ???C???E?B???h?E??}?E?X????{?^????????????????????
								//	WM_FILTER_MAIN_MOUSE_DBLCLK	: ???C???E?B???h?E??}?E?X????{?^?????_?u???N???b?N??????????????
								//	WM_FILTER_MAIN_MOUSE_R_DOWN	: ???C???E?B???h?E??}?E?X??E?{?^????????????????????
								//	WM_FILTER_MAIN_MOUSE_R_UP	: ???C???E?B???h?E??}?E?X??E?{?^????????????????????
								//	WM_FILTER_MAIN_MOUSE_WHEEL	: ???C???E?B???h?E??}?E?X??z?C?[??????]??????????????
								//	WM_FILTER_MAIN_KEY_DOWN		: ???C???E?B???h?E??L?[??????????????????
								//	WM_FILTER_MAIN_KEY_UP		: ???C???E?B???h?E??L?[??????????????????
								//	WM_FILTER_MAIN_MOVESIZE		: ???C???E?B???h?E???u??T?C?Y????X??????????????
								//	WM_FILTER_MAIN_CONTEXTMENU	: ???C???E?B???h?E??R???e?L?X?g???j???[???\???????????????
								//	WM_FILTER_MAIN_MOUSE_?????lparam????W????????W????????(??W????O??0??????)
								//	WM_FILTER_MAIN_MOUSE_WHEEL??wparam??????[?h??z?C?[?????]?????????
								//	WM_FILTER_MAIN_KEY_?????wparam?????z?L?[?R?[?h????????
								//	WM_FILTER_MAIN_MOVESIZE??lparam?????C???E?B???h?E??E?B???h?E?n???h??????????
								//	WM_FILTER_MAIN_CONTEXTMENU??lparam???X?N???[?????W????????
								//	WM_FILTER_MAIN_CONTEXTMENU????j???[??\????????????l??TRUE????????????(??`??????????)
								//	???l??TRUE???????W???e???X?V?????????S?????`?ú{????
	int		*track;				//	?g???b?N?o?[????l?S???|?C???^ (AviUtl??????????)
	int		*check;				//	?`?F?b?N?{?b?N?X????l?S???|?C???^ (AviUtl??????????)
	void	*ex_data_ptr;		//	?g???f?[?^?????|?C???^ (FILTER_FLAG_EX_DATA?????????????L??)
	int		ex_data_size;		//	?g???f?[?^?T?C?Y (FILTER_FLAG_EX_DATA?????????????L??)
	TCHAR	*information;		//	?t?B???^?????|?C???^ (FILTER_FLAG_EX_INFORMATION?????????????L??)
	BOOL	(*func_save_start)( void *fp,int s,int e,void *editp );
								//	?Z?[?u???J?n??????O???????????|?C???^ (NULL??????????)
								//	s	 	: ?Z?[?u??????t???[??
								//	e 		: ?Z?[?u?????I?t???[??
								//  ???l	: ???????TRUE
	BOOL	(*func_save_end)( void *fp,void *editp );
								//	?Z?[?u???I?????????O???????????|?C???^ (NULL??????????)
	EXFUNC	*exfunc;			//	?O??????e?[?u?????|?C???^ (AviUtl??????????)
	HWND	hwnd;				//	?E?B???h?E?n???h?? (AviUtl??????????)
	HINSTANCE	dll_hinst;		//	DLL??C???X?^???X?n???h?? (AviUtl??????????)
	void	*ex_data_def;		//	?g???f?[?^??????l?f?[?^?????|?C???^ (NULL??˚a????????????)
	BOOL	(*func_is_saveframe)( void *fp,void *editp,int saveno,int frame,int fps,int edit_flag,int inter );
								//	?C???^?[???[?X?????t?B???^????????t???[????????????????????|?C???^ (NULL??????????)
								//	saveno		: ?Z?[?u?????????????t???[?????
								//	frame		: ??W?t???[?????
								//	fps			: ?t???[?????[?g???X????l (30,24,20,15,10)
								//	edit_flag	: ??W?t???O
								//	inter		: ?t???[????C???^?[???[?X
								//	???l		: TRUE?????????t???[???AFALSE???????????t???[?????????B
	BOOL	(*func_project_load)( void *fp,void *editp,void *data,int size );
								//	?v???W?F?N?g?t?@?C??????f?[?^???????????????????|?C???^ (NULL??????????)
								//	?v???W?F?N?g?t?@?C???????????f?[?^?????????????????
								//	data 	: ?v???W?F?N?g?????????f?[?^???|?C???^
								//	size 	: ?v???W?F?N?g?????????f?[?^??o?C?g??
								//  ???l	: ???????TRUE
	BOOL	(*func_project_save)( void *fp,void *editp,void *data,int *size );
								//	?v???W?F?N?g?t?@?C?????Z?[?u??????????????????|?C???^ (NULL??????????)
								//	?v???W?F?N?g?t?@?C????t?B???^??f?[?^?????????
								//	??AviUtl?????n??????T?C?Y?èÔ????data??NULL???Ñëo????A??????????f?[?^???èÔ???????Ñëo???????B
								//	data 	: ?v???W?F?N?g?????????f?[?^???i?[????o?b?t?@???|?C???^ (NULL?????f?[?^??o?C?g???????)
								//	size 	: ?v???W?F?N?g?????????f?[?^??o?C?g???????|?C???^
								//  ???l	: ???????f?[?^????????TRUE
	BOOL	(*func_modify_title)( void *fp,void *editp,int frame,LPSTR title,int max_title );
								//	???C???E?B???h?E??^?C?g???o?[??\?????????????????|?C???^ (NULL??????????)
								//	?^?C?g???o?[?????????X?????? (????W???A?o????????????)
								//	frame		: ??W?t???[?????
								//	title 		: ?\??????^?C?g???o?[???????
								//	max_title 	: title??o?b?t?@?T?C?Y
								//  ???l	: ???????TRUE
	TCHAR	*dll_path;			//	Plugins?f?B???N?g????T?u?f?B???N?g????DLL?????????A?T?u?f?B???N?g?????????????B
	int		reserve[2];			//	?g???p??\???????BNULL?????????????B

} FILTER;
#define	FILTER_FLAG_ACTIVE				1
#define	FILTER_FLAG_ALWAYS_ACTIVE		4
#define	FILTER_FLAG_CONFIG_POPUP		8
#define	FILTER_FLAG_CONFIG_CHECK		16
#define	FILTER_FLAG_CONFIG_RADIO		32
#define	FILTER_FLAG_EX_DATA				1024
#define	FILTER_FLAG_PRIORITY_HIGHEST	2048
#define	FILTER_FLAG_PRIORITY_LOWEST		4096
#define	FILTER_FLAG_WINDOW_THICKFRAME	8192
#define	FILTER_FLAG_WINDOW_SIZE			16384
#define	FILTER_FLAG_DISP_FILTER			32768
#define	FILTER_FLAG_REDRAW				0x20000
#define	FILTER_FLAG_EX_INFORMATION		0x40000
#define	FILTER_FLAG_INFORMATION			0x80000
#define	FILTER_FLAG_NO_CONFIG			0x100000
#define	FILTER_FLAG_AUDIO_FILTER		0x200000
#define	FILTER_FLAG_RADIO_BUTTON		0x400000
#define	FILTER_FLAG_WINDOW_HSCROLL		0x800000
#define	FILTER_FLAG_WINDOW_VSCROLL		0x1000000
#define	FILTER_FLAG_INTERLACE_FILTER	0x4000000
#define	FILTER_FLAG_NO_INIT_DATA		0x8000000
#define	FILTER_FLAG_IMPORT				0x10000000
#define	FILTER_FLAG_EXPORT				0x20000000
#define	FILTER_FLAG_MAIN_MESSAGE		0x40000000
#define WM_FILTER_UPDATE				(WM_USER+100)
#define WM_FILTER_FILE_OPEN				(WM_USER+101)
#define WM_FILTER_FILE_CLOSE			(WM_USER+102)
#define WM_FILTER_INIT					(WM_USER+103)
#define WM_FILTER_EXIT					(WM_USER+104)
#define WM_FILTER_SAVE_START			(WM_USER+105)
#define WM_FILTER_SAVE_END				(WM_USER+106)
#define WM_FILTER_IMPORT				(WM_USER+107)
#define WM_FILTER_EXPORT				(WM_USER+108)
#define WM_FILTER_CHANGE_ACTIVE			(WM_USER+109)
#define WM_FILTER_CHANGE_WINDOW			(WM_USER+110)
#define WM_FILTER_CHANGE_PARAM			(WM_USER+111)
#define WM_FILTER_CHANGE_EDIT			(WM_USER+112)
#define WM_FILTER_COMMAND				(WM_USER+113)
#define	WM_FILTER_FILE_UPDATE			(WM_USER+114)
#define	WM_FILTER_MAIN_MOUSE_DOWN		(WM_USER+120)
#define	WM_FILTER_MAIN_MOUSE_UP			(WM_USER+121)
#define	WM_FILTER_MAIN_MOUSE_MOVE		(WM_USER+122)
#define	WM_FILTER_MAIN_KEY_DOWN			(WM_USER+123)
#define	WM_FILTER_MAIN_KEY_UP			(WM_USER+124)
#define	WM_FILTER_MAIN_MOVESIZE			(WM_USER+125)
#define	WM_FILTER_MAIN_MOUSE_DBLCLK		(WM_USER+126)
#define	WM_FILTER_MAIN_MOUSE_R_DOWN		(WM_USER+127)
#define	WM_FILTER_MAIN_MOUSE_R_UP		(WM_USER+128)
#define	WM_FILTER_MAIN_MOUSE_WHEEL		(WM_USER+129)
#define	WM_FILTER_MAIN_CONTEXTMENU		(WM_USER+130)
#define FILTER_UPDATE_STATUS_ALL		0
#define FILTER_UPDATE_STATUS_TRACK		0x10000
#define FILTER_UPDATE_STATUS_CHECK		0x20000
#define	FILTER_WINDOW_SIZE_CLIENT		0x10000000
#define	FILTER_WINDOW_SIZE_ADD			0x30000000

//	?t?B???^DLL?p?\????
typedef struct {
	int			flag;
	int			x,y;
	TCHAR		*name;
	int			track_n;
	TCHAR		**track_name;
	int			*track_default;
	int			*track_s,*track_e;
	int			check_n;
	TCHAR		**check_name;
	int			*check_default;
	BOOL		(*func_proc)( FILTER *fp,FILTER_PROC_INFO *fpip );
	BOOL		(*func_init)( FILTER *fp );
	BOOL		(*func_exit)( FILTER *fp );
	BOOL		(*func_update)( FILTER *fp,int status );
	BOOL 		(*func_WndProc)( HWND hwnd,UINT message,WPARAM wparam,LPARAM lparam,void *editp,FILTER *fp );
	int			*track,*check;
	void		*ex_data_ptr;
	int			ex_data_size;
	TCHAR		*information;
	BOOL		(*func_save_start)( FILTER *fp,int s,int e,void *editp );
	BOOL		(*func_save_end)( FILTER *fp,void *editp );
	EXFUNC		*exfunc;
	HWND		hwnd;
	HINSTANCE	dll_hinst;
	void		*ex_data_def;
	BOOL		(*func_is_saveframe)( FILTER *fp,void *editp,int saveno,int frame,int fps,int edit_flag,int inter );
	BOOL		(*func_project_load)( FILTER *fp,void *editp,void *data,int size );
	BOOL		(*func_project_save)( FILTER *fp,void *editp,void *data,int *size );
	BOOL		(*func_modify_title)( FILTER *fp,void *editp,int frame,LPSTR title,int max_title );
	TCHAR		*dll_path;
	int			reserve[2];
} FILTER_DLL;

#define	MID_FILTER_BUTTON			12004

BOOL func_proc( FILTER *fp,FILTER_PROC_INFO *fpip );
BOOL func_init( FILTER *fp );
BOOL func_exit( FILTER *fp );
BOOL func_update( FILTER *fp,int status );
BOOL func_WndProc( HWND hwnd,UINT message,WPARAM wparam,LPARAM lparam,void *editp,FILTER *fp );
BOOL func_save_start( FILTER *fp,int s,int e,void *editp );
BOOL func_save_end( FILTER *fp,void *editp );
BOOL func_is_saveframe( FILTER *fp,void *editp,int saveno,int frame,int fps,int edit_flag,int inter );
BOOL func_project_load( FILTER *fp,void *editp,void *data,int size );
BOOL func_project_save( FILTER *fp,void *editp,void *data,int *size );
BOOL func_modify_title( FILTER *fp,void *editp,int frame,LPSTR title,int max_title );
